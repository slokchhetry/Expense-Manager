<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronMan Expense Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0% { opacity: 0.6; transform: scale(0.98); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0.6; transform: scale(0.98); }
        }
        
        .ironman-loader {
            animation: pulse 2s infinite;
        }
        
        .stats-card {
            backdrop-filter: blur(8px);
            background: rgba(45, 45, 45, 0.8);
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #ef4444;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #dc2626;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            100: '#2d2d2d',
                            200: '#1a1a1a'
                        },
                        ironman: {
                            red: '#ef4444',
                            gold: '#f59e0b'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-dark-200 text-white min-h-screen">
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-dark-200 z-50 flex flex-col items-center justify-center">
        <svg class="ironman-loader w-32 h-32 mb-8" viewBox="0 0 100 100">
            <path fill="#ef4444" d="M50 10 L90 30 L90 70 L50 90 L10 70 L10 30 Z">
                <animate attributeName="fill" values="#ef4444;#f59e0b;#ef4444" dur="2s" repeatCount="indefinite"/>
            </path>
            <circle fill="#f59e0b" cx="50" cy="50" r="15">
                <animate attributeName="r" values="15;20;15" dur="2s" repeatCount="indefinite"/>
            </circle>
        </svg>
        <div class="text-2xl font-bold text-ironman-red">JARVIS Initializing...</div>
        <div class="text-ironman-gold mt-2">Powering up expense tracking systems</div>
    </div>

    <!-- Main Content (Previous content remains the same until the footer) -->
    <!-- ... Previous content ... -->

    <!-- Stats Footer -->
    <footer class="mt-12 bg-gradient-to-r from-dark-100 to-dark-200 py-8 px-4">
        <div class="container mx-auto max-w-6xl">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Total Stats Card -->
                <div class="stats-card rounded-xl p-6 border border-ironman-red/20 hover:border-ironman-red/40 transition-colors">
                    <div class="text-ironman-red text-sm font-semibold mb-2">TOTAL EXPENSES</div>
                    <div id="stats-total" class="text-3xl font-bold mb-2">$0.00</div>
                    <div id="stats-count" class="text-gray-400 text-sm">0 transactions</div>
                </div>

                <!-- Monthly Average Card -->
                <div class="stats-card rounded-xl p-6 border border-ironman-gold/20 hover:border-ironman-gold/40 transition-colors">
                    <div class="text-ironman-gold text-sm font-semibold mb-2">MONTHLY AVERAGE</div>
                    <div id="stats-monthly-avg" class="text-3xl font-bold mb-2">$0.00</div>
                    <div id="stats-months" class="text-gray-400 text-sm">0 months tracked</div>
                </div>

                <!-- Highest Expense Card -->
                <div class="stats-card rounded-xl p-6 border border-ironman-red/20 hover:border-ironman-red/40 transition-colors">
                    <div class="text-ironman-red text-sm font-semibold mb-2">HIGHEST EXPENSE</div>
                    <div id="stats-highest" class="text-3xl font-bold mb-2">$0.00</div>
                    <div id="stats-highest-category" class="text-gray-400 text-sm">No expenses yet</div>
                </div>

                <!-- Top Category Card -->
                <div class="stats-card rounded-xl p-6 border border-ironman-gold/20 hover:border-ironman-gold/40 transition-colors">
                    <div class="text-ironman-gold text-sm font-semibold mb-2">TOP CATEGORY</div>
                    <div id="stats-top-category" class="text-3xl font-bold mb-2">-</div>
                    <div id="stats-category-percent" class="text-gray-400 text-sm">0% of total</div>
                </div>
            </div>

            <!-- Created By Section -->
            <div class="text-center">
                <div class="inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-dark-100">
                    <span class="text-ironman-red font-bold">POWERED BY</span>
                    <span class="text-ironman-gold">IRONMAN</span>
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-ironman-gold">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                    </svg>
                </div>
            </div>
        </div>
    </footer>

    <!-- Audio Elements -->
    <audio id="startup-sound" preload="auto">
        <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAEAAABVgANTU1NTU1Q0NDQ0NDUVFRUVFRYGBgYGBgbm5ubm5ufX19fX19i4uLi4uLmpqampqaqqqqqqqqubm5ubm5yMjIyMjI1tbW1tbW5eXl5eXl8/Pz8/Pz//////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAAAAAAAAAAAUMY5ZQAAAAAAAAAAAAAAAAAAAAAA/+QowAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV" type="audio/mpeg">
    </audio>
    <audio id="click-sound" preload="auto">
        <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAAwAAABkAYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBg/////////////////////////////////////////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV" type="audio/mpeg">
    </audio>

    <script>
        // Previous JavaScript plus these additions:
        class ExpenseTracker {
            constructor() {
                // ... previous constructor code ...
                
                // Add loading screen and sound effects
                this.initializeLoadingScreen();
            }

            initializeLoadingScreen() {
                const startupSound = document.getElementById('startup-sound');
                startupSound.play();
                
                setTimeout(() => {
                    document.getElementById('loading-screen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.display = 'none';
                    }, 500);
                }, 2000);
            }

            playClickSound() {
                const clickSound = document.getElementById('click-sound');
                clickSound.currentTime = 0;
                clickSound.play();
            }

            updateStats() {
                const total = this.expenses.reduce((sum, expense) => sum + expense.amount, 0);
                const count = this.expenses.length;
                
                // Get unique months count
                const uniqueMonths = new Set(
                    this.expenses.map(expense => {
                        const date = new Date(expense.date);
                        return `${date.getMonth()}-${date.getFullYear()}`;
                    })
                ).size;
                
                // Calculate monthly average
                const monthlyAvg = uniqueMonths ? total / uniqueMonths : 0;
                
                // Get highest expense
                const highest = this.expenses.length ? 
                    this.expenses.reduce((max, expense) => expense.amount > max.amount ? expense : max) :
                    null;
                
                // Get top category
                const categoryTotals = this.expenses.reduce((acc, expense) => {
                    acc[expense.category] = (acc[expense.category] || 0) + expense.amount;
                    return acc;
                }, {});
                
                const topCategory = Object.entries(categoryTotals).sort((a, b) => b[1] - a[1])[0];
                
                // Update stats UI
                document.getElementById('stats-total').textContent = `$${total.toFixed(2)}`;
                document.getElementById('stats-count').textContent = `${count} transaction${count !== 1 ? 's' : ''}`;
                document.getElementById('stats-monthly-avg').textContent = `$${monthlyAvg.toFixed(2)}`;
                document.getElementById('stats-months').textContent = `${uniqueMonths} month${uniqueMonths !== 1 ? 's' : ''} tracked`;
                
                if (highest) {
                    document.getElementById('stats-highest').textContent = `$${highest.amount.toFixed(2)}`;
                    document.getElementById('stats-highest-category').textContent = `${this.capitalizeFirst(highest.category)} - ${highest.name}`;
                }
                
                if (topCategory) {
                    const [category, amount] = topCategory;
                    const percentage = ((amount / total) * 100).toFixed(1);
                    document.getElementById('stats-top-category').textContent = this.capitalizeFirst(category);
                    document.getElementById('stats-category-percent').textContent = `${percentage}% of total`;
                }
            }

            updateUI() {
                this.updateTransactionsList();
                this.updateChart();
                this.updateBalance();
                this.updateStats();
                this.playClickSound();
            }
        }

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', () => {
            new ExpenseTracker();
        });
    </script>
</body>
</html>
